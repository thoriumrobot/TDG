{"directed": true, "multigraph": false, "graph": {}, "nodes": [{"attr": {"type": "file", "name": "src356.java", "nullable": false, "actual_type": null}, "id": "src356.java"}, {"attr": {"type": "class", "name": "EmailDataProviderImpl", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl"}, {"attr": {"type": "method", "name": "setTransactionManager", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.setTransactionManager()"}, {"attr": {"type": "parameter", "name": "transactionManager", "nullable": false, "actual_type": "PlatformTransactionManager"}, "id": "src356.java.EmailDataProviderImpl.setTransactionManager().transactionManager"}, {"attr": {"type": "method", "name": "loadEmailsToSend", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.loadEmailsToSend()"}, {"attr": {"type": "method", "name": "updateStatus", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.updateStatus()"}, {"attr": {"type": "parameter", "name": "sendingMessage", "nullable": false, "actual_type": "SendingMessage"}, "id": "src356.java.EmailDataProviderImpl.updateStatus().sendingMessage"}, {"attr": {"type": "parameter", "name": "status", "nullable": false, "actual_type": "SendingStatus"}, "id": "src356.java.EmailDataProviderImpl.updateStatus().status"}, {"attr": {"type": "method", "name": "loadContentText", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.loadContentText()"}, {"attr": {"type": "parameter", "name": "sendingMessage", "nullable": false, "actual_type": "SendingMessage"}, "id": "src356.java.EmailDataProviderImpl.loadContentText().sendingMessage"}, {"attr": {"type": "method", "name": "persistMessage", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.persistMessage()"}, {"attr": {"type": "parameter", "name": "sendingMessage", "nullable": false, "actual_type": "SendingMessage"}, "id": "src356.java.EmailDataProviderImpl.persistMessage().sendingMessage"}, {"attr": {"type": "parameter", "name": "status", "nullable": false, "actual_type": "SendingStatus"}, "id": "src356.java.EmailDataProviderImpl.persistMessage().status"}, {"attr": {"type": "method", "name": "migrateEmailsToFileStorage", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.migrateEmailsToFileStorage()"}, {"attr": {"type": "parameter", "name": "messages", "nullable": false, "actual_type": "List"}, "id": "src356.java.EmailDataProviderImpl.migrateEmailsToFileStorage().messages"}, {"attr": {"type": "method", "name": "migrateAttachmentsToFileStorage", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.migrateAttachmentsToFileStorage()"}, {"attr": {"type": "parameter", "name": "attachments", "nullable": false, "actual_type": "List"}, "id": "src356.java.EmailDataProviderImpl.migrateAttachmentsToFileStorage().attachments"}, {"attr": {"type": "method", "name": "buildErrorMessage", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.buildErrorMessage()"}, {"attr": {"type": "parameter", "name": "status", "nullable": false, "actual_type": "SendingStatus"}, "id": "src356.java.EmailDataProviderImpl.buildErrorMessage().status"}, {"attr": {"type": "method", "name": "migrateMessage", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.migrateMessage()"}, {"attr": {"type": "parameter", "name": "msg", "nullable": false, "actual_type": "SendingMessage"}, "id": "src356.java.EmailDataProviderImpl.migrateMessage().msg"}, {"attr": {"type": "method", "name": "migrateAttachment", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.migrateAttachment()"}, {"attr": {"type": "parameter", "name": "attachment", "nullable": false, "actual_type": "SendingAttachment"}, "id": "src356.java.EmailDataProviderImpl.migrateAttachment().attachment"}, {"attr": {"type": "method", "name": "shouldMarkNotSent", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.shouldMarkNotSent()"}, {"attr": {"type": "parameter", "name": "sendingMessage", "nullable": false, "actual_type": "SendingMessage"}, "id": "src356.java.EmailDataProviderImpl.shouldMarkNotSent().sendingMessage"}, {"attr": {"type": "method", "name": "loadBodyAndAttachments", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.loadBodyAndAttachments()"}, {"attr": {"type": "parameter", "name": "message", "nullable": false, "actual_type": "SendingMessage"}, "id": "src356.java.EmailDataProviderImpl.loadBodyAndAttachments().message"}, {"attr": {"type": "method", "name": "persistSendingMessage", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.persistSendingMessage()"}, {"attr": {"type": "parameter", "name": "message", "nullable": false, "actual_type": "SendingMessage"}, "id": "src356.java.EmailDataProviderImpl.persistSendingMessage().message"}, {"attr": {"type": "parameter", "name": "context", "nullable": false, "actual_type": "MessagePersistingContext"}, "id": "src356.java.EmailDataProviderImpl.persistSendingMessage().context"}, {"attr": {"type": "method", "name": "createContentFile", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.createContentFile()"}, {"attr": {"type": "parameter", "name": "context", "nullable": true, "actual_type": "MessagePersistingContext"}, "id": "src356.java.EmailDataProviderImpl.createContentFile().context"}, {"attr": {"type": "parameter", "name": "bodyBytes", "nullable": false, "actual_type": "byte"}, "id": "src356.java.EmailDataProviderImpl.createContentFile().bodyBytes"}, {"attr": {"type": "parameter", "name": "fileName", "nullable": false, "actual_type": "String"}, "id": "src356.java.EmailDataProviderImpl.createContentFile().fileName"}, {"attr": {"type": "method", "name": "getFileName", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.getFileName()"}, {"attr": {"type": "parameter", "name": "msg", "nullable": false, "actual_type": "SendingMessage"}, "id": "src356.java.EmailDataProviderImpl.getFileName().msg"}, {"attr": {"type": "method", "name": "bodyTextFromByteArray", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.bodyTextFromByteArray()"}, {"attr": {"type": "parameter", "name": "bodyContent", "nullable": false, "actual_type": "byte"}, "id": "src356.java.EmailDataProviderImpl.bodyTextFromByteArray().bodyContent"}, {"attr": {"type": "method", "name": "bodyTextToBytes", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.bodyTextToBytes()"}, {"attr": {"type": "parameter", "name": "message", "nullable": false, "actual_type": "SendingMessage"}, "id": "src356.java.EmailDataProviderImpl.bodyTextToBytes().message"}, {"attr": {"type": "method", "name": "removeOrphanFiles", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.removeOrphanFiles()"}, {"attr": {"type": "parameter", "name": "context", "nullable": false, "actual_type": "MessagePersistingContext"}, "id": "src356.java.EmailDataProviderImpl.removeOrphanFiles().context"}, {"attr": {"type": "method", "name": "getFileStorage", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.getFileStorage()"}, {"attr": {"type": "field", "name": "BODY_FILE_EXTENSION", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.BODY_FILE_EXTENSION"}, {"attr": {"type": "field", "name": "log", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.log"}, {"attr": {"type": "field", "name": "emailerProperties", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.emailerProperties"}, {"attr": {"type": "field", "name": "timeSource", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.timeSource"}, {"attr": {"type": "field", "name": "entityManager", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.entityManager"}, {"attr": {"type": "field", "name": "fetchPlanRepository", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.fetchPlanRepository"}, {"attr": {"type": "field", "name": "transaction", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.transaction"}, {"attr": {"type": "field", "name": "fileStorage", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.fileStorage"}, {"attr": {"type": "field", "name": "dataManager", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.dataManager"}, {"attr": {"type": "field", "name": "fileStorageLocator", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.fileStorageLocator"}, {"attr": {"type": "field", "name": "entityEventManager", "nullable": false, "actual_type": null}, "id": "src356.java.EmailDataProviderImpl.entityEventManager"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_132_40"}, {"id": "src356.java.setContentText"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_146_25"}, {"id": "src356.java.orElse"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_150_41"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_170_58"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_208_53"}, {"id": "src356.java.createContentFile"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_210_28"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_215_49"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_217_31"}, {"id": "src356.java.setContent"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_222_25"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_228_53"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_230_59"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_236_49"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_243_52"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_262_36"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_272_39"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_282_24"}, {"attr": {"type": "literal", "name": "null", "nullable": false, "actual_type": null}, "id": "src356.java.null_319_28"}, {"attr": {"type": "class", "name": "MessagePersistingContext", "nullable": false, "actual_type": null}, "id": "src356.java.MessagePersistingContext"}, {"attr": {"type": "method", "name": "finished", "nullable": false, "actual_type": null}, "id": "src356.java.MessagePersistingContext.finished()"}, {"attr": {"type": "field", "name": "files", "nullable": false, "actual_type": null}, "id": "src356.java.MessagePersistingContext.files"}], "links": [{"type": "contains", "source": "src356.java", "target": "src356.java.EmailDataProviderImpl"}, {"type": "contains", "source": "src356.java", "target": "src356.java.MessagePersistingContext"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.setTransactionManager()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.loadEmailsToSend()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.updateStatus()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.loadContentText()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.persistMessage()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.migrateEmailsToFileStorage()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.migrateAttachmentsToFileStorage()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.buildErrorMessage()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.migrateMessage()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.migrateAttachment()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.shouldMarkNotSent()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.loadBodyAndAttachments()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.persistSendingMessage()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.createContentFile()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.getFileName()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.bodyTextFromByteArray()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.bodyTextToBytes()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.removeOrphanFiles()"}, {"type": "contains", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.getFileStorage()"}, {"type": "has_field", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.BODY_FILE_EXTENSION"}, {"type": "has_field", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.log"}, {"type": "has_field", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.emailerProperties"}, {"type": "has_field", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.timeSource"}, {"type": "has_field", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.entityManager"}, {"type": "has_field", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.fetchPlanRepository"}, {"type": "has_field", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.transaction"}, {"type": "has_field", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.fileStorage"}, {"type": "has_field", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.dataManager"}, {"type": "has_field", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.fileStorageLocator"}, {"type": "has_field", "source": "src356.java.EmailDataProviderImpl", "target": "src356.java.EmailDataProviderImpl.entityEventManager"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.setTransactionManager()", "target": "src356.java.EmailDataProviderImpl.setTransactionManager().transactionManager"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.updateStatus()", "target": "src356.java.EmailDataProviderImpl.updateStatus().sendingMessage"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.updateStatus()", "target": "src356.java.EmailDataProviderImpl.updateStatus().status"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.loadContentText()", "target": "src356.java.EmailDataProviderImpl.loadContentText().sendingMessage"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.persistMessage()", "target": "src356.java.EmailDataProviderImpl.persistMessage().sendingMessage"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.persistMessage()", "target": "src356.java.EmailDataProviderImpl.persistMessage().status"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.migrateEmailsToFileStorage()", "target": "src356.java.EmailDataProviderImpl.migrateEmailsToFileStorage().messages"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.migrateAttachmentsToFileStorage()", "target": "src356.java.EmailDataProviderImpl.migrateAttachmentsToFileStorage().attachments"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.buildErrorMessage()", "target": "src356.java.EmailDataProviderImpl.buildErrorMessage().status"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.migrateMessage()", "target": "src356.java.EmailDataProviderImpl.migrateMessage().msg"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.migrateAttachment()", "target": "src356.java.EmailDataProviderImpl.migrateAttachment().attachment"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.shouldMarkNotSent()", "target": "src356.java.EmailDataProviderImpl.shouldMarkNotSent().sendingMessage"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.loadBodyAndAttachments()", "target": "src356.java.EmailDataProviderImpl.loadBodyAndAttachments().message"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.persistSendingMessage()", "target": "src356.java.EmailDataProviderImpl.persistSendingMessage().message"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.persistSendingMessage()", "target": "src356.java.EmailDataProviderImpl.persistSendingMessage().context"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.createContentFile()", "target": "src356.java.EmailDataProviderImpl.createContentFile().context"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.createContentFile()", "target": "src356.java.EmailDataProviderImpl.createContentFile().bodyBytes"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.createContentFile()", "target": "src356.java.EmailDataProviderImpl.createContentFile().fileName"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.getFileName()", "target": "src356.java.EmailDataProviderImpl.getFileName().msg"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.bodyTextFromByteArray()", "target": "src356.java.EmailDataProviderImpl.bodyTextFromByteArray().bodyContent"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.bodyTextToBytes()", "target": "src356.java.EmailDataProviderImpl.bodyTextToBytes().message"}, {"type": "has_parameter", "source": "src356.java.EmailDataProviderImpl.removeOrphanFiles()", "target": "src356.java.EmailDataProviderImpl.removeOrphanFiles().context"}, {"type": "contains", "source": "src356.java.setContentText", "target": "src356.java.null_132_40"}, {"type": "contains", "source": "src356.java.setContentText", "target": "src356.java.null_210_28"}, {"type": "contains", "source": "src356.java.setContentText", "target": "src356.java.null_262_36"}, {"type": "contains", "source": "src356.java.orElse", "target": "src356.java.null_146_25"}, {"type": "contains", "source": "src356.java.createContentFile", "target": "src356.java.null_208_53"}, {"type": "contains", "source": "src356.java.createContentFile", "target": "src356.java.null_215_49"}, {"type": "contains", "source": "src356.java.setContent", "target": "src356.java.null_217_31"}, {"type": "contains", "source": "src356.java.setContent", "target": "src356.java.null_272_39"}, {"type": "contains", "source": "src356.java.MessagePersistingContext", "target": "src356.java.MessagePersistingContext.finished()"}, {"type": "has_field", "source": "src356.java.MessagePersistingContext", "target": "src356.java.MessagePersistingContext.files"}]}